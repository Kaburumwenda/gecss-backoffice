(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{585:function(e,t,r){var content=r(607);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(40).default)("fd142ee8",content,!0,{sourceMap:!1})},606:function(e,t,r){"use strict";r(585)},607:function(e,t,r){var n=r(37)(!1);n.push([e.i,"\n.pdf-filter-btn[data-v-7814e298]{\n    display: flex;\n    justify-content: space-around;\n}\n",""]),e.exports=n},700:function(e,t,r){"use strict";r.r(t);var n=r(30),o=(r(64),r(2),r(4),r(576)),d=(r(577),r(570),{name:"PdfRecord",data:function(){return{create_record:{fromdate:"",todate:""},bike_err:"",pdfData:[],btn_loading:!1,btn_loading_today:!1,btn_loading_week:!1,btn_loading_month:!1,btn_loading_year:!1}},methods:{pdfGenerate:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={todate:e.create_record.todate,fromdate:e.create_record.fromdate},n=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+n,t.next=5,e.$axios.$post("v1/reports/bike_reports_filter_range",r,{headers:{Authorization:"Token ".concat(n)}}).then((function(t){if(t.length>=1){e.$bvModal.hide("pdf-record"),e.pdfData=t;var r=e.pdfData,n=[];r.forEach((function(element,e,t){n.push([e+1,element.bike_no,element.swap,element.units,element.mileage,element.ghg])}));var d=new o.default;d.autoTable({head:[["No","E-Bike","No. Swap","units(Kw)","Km. Driven","GHG Avoided"]],body:n});var c=d.internal.getNumberOfPages(),i=0;for(i=0;i<c;i++){d.setPage(i);var l=d.internal.getCurrentPageInfo().pageNumber;d.setFontSize(12),d.text("page: "+l+"/"+c,10,d.internal.pageSize.height-10)}var f=Date(),v=c;for(i=1;i<=v;i++)d.setPage(i),d.setTextColor(150),d.setFontSize(7),d.text(50,d.internal.pageSize.height-10,"GECSS INVESTMENTS   -    CONFIDENTIAL      ".concat(f));d.save("GECSS_ebike_report.pdf"),Swal.fire({icon:"success",title:"Pdf downloaded successfully"}),e.create_record={}}else{e.$bvModal.hide("pdf-record");Swal.fire({icon:"error",title:"Oops.!!! No record found, please enter dates again."}),e.create_record={}}}));case 5:case"end":return t.stop()}}),t)})))()},getPdfToday:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,e.btn_loading_today=!0,t.next=5,e.$axios.$get("v1/reports/battery_reports",{headers:{Authorization:"Token ".concat(r)}}).then((function(t){if(t.length>=1){e.$bvModal.hide("pdf-record"),e.pdfData=t;var r=e.pdfData,n=[];r.forEach((function(element,e,t){n.push([e+1,element.battery_code1,element.swap,element.units,element.amount])}));var d=new o.default;d.autoTable({head:[["No","Battery Code","No. Swap","units(Kw)","Revenue (KES)"]],body:n});var c=d.internal.getNumberOfPages(),i=0;for(i=0;i<c;i++){d.setPage(i);var l=d.internal.getCurrentPageInfo().pageNumber;d.setFontSize(12),d.text("page: "+l+"/"+c,10,d.internal.pageSize.height-10)}var f=Date(),v=c;for(i=1;i<=v;i++)d.setPage(i),d.setTextColor(150),d.setFontSize(7),d.text(50,d.internal.pageSize.height-10,"GECSS INVESTMENTS   -    CONFIDENTIAL      ".concat(f));d.save("battery_report.pdf"),Swal.fire({icon:"success",title:"Pdf downloaded successfully"}),e.create_record={}}else{e.$bvModal.hide("pdf-record");Swal.fire({icon:"error",title:"Oops.!!! No record found, please enter dates again."}),e.create_record={}}}));case 5:e.btn_loading_today=!1;case 6:case"end":return t.stop()}}),t)})))()},getPdfWeek:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,e.btn_loading_week=!0,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_week",{headers:{Authorization:"Token ".concat(r)}}).then((function(t){if(t.length>=1){e.$bvModal.hide("pdf-record"),e.pdfData=t;var r=e.pdfData,n=[];r.forEach((function(element,e,t){n.push([e+1,element.bike_no,element.swap,element.units,element.mileage,element.ghg])}));var d=new o.default;d.autoTable({head:[["No","E-Bike","No. Swap","units(Kw)","Km. Driven","GHG Avoided"]],body:n});var c=d.internal.getNumberOfPages(),i=0;for(i=0;i<c;i++){d.setPage(i);var l=d.internal.getCurrentPageInfo().pageNumber;d.setFontSize(12),d.text("page: "+l+"/"+c,10,d.internal.pageSize.height-10)}var f=Date(),v=c;for(i=1;i<=v;i++)d.setPage(i),d.setTextColor(150),d.setFontSize(7),d.text(50,d.internal.pageSize.height-10,"GECSS INVESTMENTS   -    CONFIDENTIAL      ".concat(f));d.save("GECSS_ebike_report.pdf"),Swal.fire({icon:"success",title:"Pdf downloaded successfully"}),e.create_record={}}else{e.$bvModal.hide("pdf-record");Swal.fire({icon:"error",title:"Oops.!!! No record found, please enter dates again."}),e.create_record={}}}));case 5:e.btn_loading_week=!1;case 6:case"end":return t.stop()}}),t)})))()},getPdfMonth:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,e.btn_loading_month=!0,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_month",{headers:{Authorization:"Token ".concat(r)}}).then((function(t){if(t.length>=1){e.$bvModal.hide("pdf-record"),e.pdfData=t;var r=e.pdfData,n=[];r.forEach((function(element,e,t){n.push([e+1,element.bike_no,element.swap,element.units,element.mileage,element.ghg])}));var d=new o.default;d.autoTable({head:[["No","E-Bike","No. Swap","units(Kw)","Km. Driven","GHG Avoided"]],body:n});var c=d.internal.getNumberOfPages(),i=0;for(i=0;i<c;i++){d.setPage(i);var l=d.internal.getCurrentPageInfo().pageNumber;d.setFontSize(12),d.text("page: "+l+"/"+c,10,d.internal.pageSize.height-10)}var f=Date(),v=c;for(i=1;i<=v;i++)d.setPage(i),d.setTextColor(150),d.setFontSize(7),d.text(50,d.internal.pageSize.height-10,"GECSS INVESTMENTS   -    CONFIDENTIAL      ".concat(f));d.save("GECSS_ebike_report.pdf"),Swal.fire({icon:"success",title:"Pdf downloaded successfully"}),e.create_record={}}else{e.$bvModal.hide("pdf-record");Swal.fire({icon:"error",title:"Oops.!!! No record found, please enter dates again."}),e.create_record={}}}));case 5:e.btn_loading_month=!1;case 6:case"end":return t.stop()}}),t)})))()},getPdfYear:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,e.btn_loading_year=!0,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_year",{headers:{Authorization:"Token ".concat(r)}}).then((function(t){if(t.length>=1){e.$bvModal.hide("pdf-record"),e.pdfData=t;var r=e.pdfData,n=[];r.forEach((function(element,e,t){n.push([e+1,element.bike_no,element.swap,element.units,element.mileage,element.amount])}));var d=new o.default;d.autoTable({head:[["No","E-Bike","No. Swap","units(Kw)","KM. Driven","Amount(KES)"]],body:n});var c=d.internal.getNumberOfPages(),i=0;for(i=0;i<c;i++){d.setPage(i);var l=d.internal.getCurrentPageInfo().pageNumber;d.setFontSize(12),d.text("page: "+l+"/"+c,10,d.internal.pageSize.height-10)}var f=Date(),v=c;for(i=1;i<=v;i++)d.setPage(i),d.setTextColor(150),d.setFontSize(7),d.text(50,d.internal.pageSize.height-10,"GECSS INVESTMENTS   -    CONFIDENTIAL      ".concat(f));d.save("GECSS_ebike_report.pdf"),Swal.fire({icon:"success",title:"Pdf downloaded successfully"}),e.create_record={}}else{e.$bvModal.hide("pdf-record");Swal.fire({icon:"error",title:"Oops.!!! No record found, please enter dates again."}),e.create_record={}}}));case 5:e.btn_loading_year=!1;case 6:case"end":return t.stop()}}),t)})))()}},props:{}}),c=(r(606),r(12)),component=Object(c.a)(d,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"pdf-filter-btn"},[t("div",[e.btn_loading_today?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getPdfToday()}}},[e._v("Today")])],1),e._v(" "),t("div",[e.btn_loading_week?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getPdfWeek()}}},[e._v("This week")])],1),e._v(" "),t("div",[e.btn_loading_month?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getPdfMonth()}}},[e._v("This month")])],1),e._v(" "),t("div",[e.btn_loading_year?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getPdfYear()}}},[e._v("This year")])],1)]),e._v(" "),t("hr"),e._v(" "),t("b-form",{on:{submit:function(t){return t.preventDefault(),e.pdfGenerate.apply(null,arguments)}}},[t("div",{attrs:{"uk-grid":""}},[t("div",{staticClass:"uk-width-expand@m"},[t("label",{staticStyle:{color:"#1a1a1a"}},[e._v("Start Date.")]),e._v(" "),t("b-form-input",{attrs:{type:"date",required:""},model:{value:e.create_record.fromdate,callback:function(t){e.$set(e.create_record,"fromdate",t)},expression:"create_record.fromdate"}})],1)]),e._v(" "),t("br"),e._v(" "),t("div",{attrs:{"uk-grid":""}},[t("div",{staticClass:"uk-width-expand@m"},[t("label",{staticStyle:{color:"#1a1a1a"}},[e._v("End date.")]),e._v(" "),t("b-form-input",{attrs:{type:"date",required:""},model:{value:e.create_record.todate,callback:function(t){e.$set(e.create_record,"todate",t)},expression:"create_record.todate"}})],1)]),e._v(" "),t("br"),e._v(" "),t("SbButton",{attrs:{title:"Download PDF"}}),e._v(" "),t("br")],1)],1)}),[],!1,null,"7814e298",null);t.default=component.exports}}]);