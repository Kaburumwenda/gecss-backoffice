(window.webpackJsonp=window.webpackJsonp||[]).push([[90,91,92,93],{586:function(e,t,r){var content=r(609);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(40).default)("638253c6",content,!0,{sourceMap:!1})},608:function(e,t,r){"use strict";r(586)},609:function(e,t,r){var n=r(37)(!1);n.push([e.i,"\n.pdf-filter-btn[data-v-44f8d1f4]{\n    display: flex;\n    justify-content: space-around;\n}\n",""]),e.exports=n},644:function(e,t,r){var content=r(817);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(40).default)("70852c1e",content,!0,{sourceMap:!1})},701:function(e,t,r){"use strict";r.r(t);var n={name:"RecordTable",props:{records:{type:Array,default:[]}}},o=r(12),component=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("DcTable",{scopedSlots:e._u([{key:"theader",fn:function(){return[t("th",{staticStyle:{"padding-left":"10px !important"}},[e._v("#")]),e._v(" "),t("th",[e._v("Bike")]),e._v(" "),t("th",[e._v("Swaps")]),e._v(" "),t("th",[e._v("Units(kw)")]),e._v(" "),t("th",[e._v("Mileage(KM)")]),e._v(" "),t("th",[e._v("GHG (kg) Avoided")]),e._v(" "),t("th",{staticClass:"text-center"},[e._v("Status")])]},proxy:!0},{key:"tbody",fn:function(){return[e.records.length?e._e():t("tr",[t("td"),t("td"),e._v(" "),t("td",[t("span",{staticStyle:{color:"purple"}},[e._v(" No records available ")])]),e._v(" "),t("td"),e._v(" "),t("td")]),e._v(" "),e._t("default")]},proxy:!0}],null,!0)})],1)}),[],!1,null,null,null);t.default=component.exports},702:function(e,t,r){"use strict";r.r(t);var n=r(30),o=(r(64),{name:"Statistics",data:function(){return{statistics:{}}},mounted:function(){this.getTotals()},methods:{getTotals:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("v1/reports/bike_reports").then((function(t){console.warn(t),e.statistics=t}));case 2:case"end":return t.stop()}}),t)})))()}}}),c=r(12),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("div",[t("b-row",[t("b-col",{attrs:{cols:"6",md:"3",lg:"6",xl:"3"}},[t("base-block",{attrs:{tag:"a",rounded:"","link-pop":"","content-class":"d-flex py-4",href:"javascript:void(0)"}},[t("div",{staticClass:"flex-grow-1"},[t("div",{staticClass:"font-size-sm font-w600 text-uppercase text-muted"},[e._v("\n            Total swaps\n          ")]),e._v(" "),t("div",{staticClass:"font-size-h5",staticStyle:{color:"green"}},[e.statistics.swaps>0?t("span",[e._v(" "+e._s(e.statistics.swaps.toLocaleString()))]):t("span",[e._v("0")])])]),e._v(" "),t("div",{staticClass:"d-flex ml-2"},[t("div",{staticClass:"flex-grow-1 px-1 bg-success-light rounded-lg"})])])],1),e._v(" "),t("b-col",{attrs:{cols:"6",md:"3",lg:"6",xl:"3"}},[t("base-block",{attrs:{tag:"a",rounded:"","link-pop":"","content-class":"d-flex py-4",href:"javascript:void(0)"}},[t("div",{staticClass:"flex-grow-1"},[t("div",{staticClass:"font-size-sm font-w600 text-uppercase text-muted"},[e._v("\n            Total units (Kw)\n          ")]),e._v(" "),t("div",{staticClass:"font-size-h5",staticStyle:{color:"green"}},[e.statistics.units>0?t("span",[e._v(" "+e._s(e.statistics.units.toLocaleString()))]):t("span",[e._v("0")])])]),e._v(" "),t("div",{staticClass:"d-flex ml-2"},[t("div",{staticClass:"flex-grow-1 px-1 bg-warning-light rounded-lg"})])])],1),e._v(" "),t("b-col",{attrs:{cols:"6",md:"3",lg:"6",xl:"3"}},[t("base-block",{attrs:{tag:"a",rounded:"","link-pop":"","content-class":"d-flex py-4",href:"javascript:void(0)"}},[t("div",{staticClass:"flex-grow-1"},[t("div",{staticClass:"font-size-sm font-w600 text-uppercase text-muted"},[e._v("\n            Total mileage (Km)\n          ")]),e._v(" "),t("div",{staticClass:"font-size-h5",staticStyle:{color:"green"}},[e.statistics.mileage>0?t("span",[e._v(" "+e._s(e.statistics.mileage.toLocaleString()))]):t("span",[e._v("0")])])]),e._v(" "),t("div",{staticClass:"d-flex ml-2"},[t("div",{staticClass:"flex-grow-1 px-1 bg-primary-light rounded-lg"})])])],1),e._v(" "),t("b-col",{attrs:{cols:"6",md:"3",lg:"6",xl:"3"}},[t("base-block",{attrs:{tag:"a",rounded:"","link-pop":"","content-class":"d-flex py-4",href:"javascript:void(0)"}},[t("div",{staticClass:"flex-grow-1"},[t("div",{staticClass:"font-size-sm font-w600 text-uppercase text-muted"},[e._v("\n            Total GHG Avoided\n          ")]),e._v(" "),t("div",{staticClass:"font-size-h5",staticStyle:{color:"green"}},[e.statistics.ghg>0?t("span",[e._v(" "+e._s(e.statistics.ghg.toLocaleString()))]):t("span",[e._v("0")])])]),e._v(" "),t("div",{staticClass:"d-flex ml-2"},[t("div",{staticClass:"flex-grow-1 px-1 bg-danger-light rounded-lg"})])])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{BaseBlock:r(302).default})},703:function(e,t,r){"use strict";r.r(t);var n=r(30),o=(r(64),r(2),r(4),r(576)),c=(r(577),r(570),{name:"PdfRecord",data:function(){return{create_record:{fromdate:"",todate:""},bike_err:"",pdfData:[],btn_loading:!1,btn_loading_today:!1,btn_loading_week:!1,btn_loading_month:!1,btn_loading_year:!1}},methods:{pdfGenerate:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={todate:e.create_record.todate,fromdate:e.create_record.fromdate},n=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+n,t.next=5,e.$axios.$post("v1/reports/bike_reports_filter_range",r,{headers:{Authorization:"Token ".concat(n)}}).then((function(t){if(t.length>=1){e.$bvModal.hide("pdf-record"),e.pdfData=t;var r=e.pdfData,n=[];r.forEach((function(element,e,t){n.push([e+1,element.bike_no,element.swap,element.units,element.mileage,element.ghg])}));var c=new o.default;c.autoTable({head:[["No","E-Bike","No. Swap","units(Kw)","Km. Driven","GHG Avoided"]],body:n});var d=c.internal.getNumberOfPages(),i=0;for(i=0;i<d;i++){c.setPage(i);var l=c.internal.getCurrentPageInfo().pageNumber;c.setFontSize(12),c.text("page: "+l+"/"+d,10,c.internal.pageSize.height-10)}var f=Date(),v=d;for(i=1;i<=v;i++)c.setPage(i),c.setTextColor(150),c.setFontSize(7),c.text(50,c.internal.pageSize.height-10,"GECSS INVESTMENTS   -    CONFIDENTIAL      ".concat(f));c.save("GECSS_ebike_report.pdf"),Swal.fire({icon:"success",title:"Pdf downloaded successfully"}),e.create_record={}}else{e.$bvModal.hide("pdf-record");Swal.fire({icon:"error",title:"Oops.!!! No record found, please enter dates again."}),e.create_record={}}}));case 5:case"end":return t.stop()}}),t)})))()},getPdfToday:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,e.btn_loading_today=!0,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_today",{headers:{Authorization:"Token ".concat(r)}}).then((function(t){if(t.length>=1){e.$bvModal.hide("pdf-record"),e.pdfData=t;var r=e.pdfData,n=[];r.forEach((function(element,e,t){n.push([e+1,element.bike_no,element.swap,element.units,element.mileage,element.ghg])}));var c=new o.default;c.autoTable({head:[["No","E-Bike","No. Swap","units(Kw)","Km. Driven","GHG Avoided"]],body:n});var d=c.internal.getNumberOfPages(),i=0;for(i=0;i<d;i++){c.setPage(i);var l=c.internal.getCurrentPageInfo().pageNumber;c.setFontSize(12),c.text("page: "+l+"/"+d,10,c.internal.pageSize.height-10)}var f=Date(),v=d;for(i=1;i<=v;i++)c.setPage(i),c.setTextColor(150),c.setFontSize(7),c.text(50,c.internal.pageSize.height-10,"GECSS INVESTMENTS   -    CONFIDENTIAL      ".concat(f));c.save("GECSS_ebike_report.pdf"),Swal.fire({icon:"success",title:"Pdf downloaded successfully"}),e.create_record={}}else{e.$bvModal.hide("pdf-record");Swal.fire({icon:"error",title:"Oops.!!! No record found, please enter dates again."}),e.create_record={}}}));case 5:e.btn_loading_today=!1;case 6:case"end":return t.stop()}}),t)})))()},getPdfWeek:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,e.btn_loading_week=!0,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_week",{headers:{Authorization:"Token ".concat(r)}}).then((function(t){if(t.length>=1){e.$bvModal.hide("pdf-record"),e.pdfData=t;var r=e.pdfData,n=[];r.forEach((function(element,e,t){n.push([e+1,element.bike_no,element.swap,element.units,element.mileage,element.ghg])}));var c=new o.default;c.autoTable({head:[["No","E-Bike","No. Swap","units(Kw)","Km. Driven","GHG Avoided"]],body:n});var d=c.internal.getNumberOfPages(),i=0;for(i=0;i<d;i++){c.setPage(i);var l=c.internal.getCurrentPageInfo().pageNumber;c.setFontSize(12),c.text("page: "+l+"/"+d,10,c.internal.pageSize.height-10)}var f=Date(),v=d;for(i=1;i<=v;i++)c.setPage(i),c.setTextColor(150),c.setFontSize(7),c.text(50,c.internal.pageSize.height-10,"GECSS INVESTMENTS   -    CONFIDENTIAL      ".concat(f));c.save("GECSS_ebike_report.pdf"),Swal.fire({icon:"success",title:"Pdf downloaded successfully"}),e.create_record={}}else{e.$bvModal.hide("pdf-record");Swal.fire({icon:"error",title:"Oops.!!! No record found, please enter dates again."}),e.create_record={}}}));case 5:e.btn_loading_week=!1;case 6:case"end":return t.stop()}}),t)})))()},getPdfMonth:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,e.btn_loading_month=!0,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_month",{headers:{Authorization:"Token ".concat(r)}}).then((function(t){if(t.length>=1){e.$bvModal.hide("pdf-record"),e.pdfData=t;var r=e.pdfData,n=[];r.forEach((function(element,e,t){n.push([e+1,element.bike_no,element.swap,element.units,element.mileage,element.ghg])}));var c=new o.default;c.autoTable({head:[["No","E-Bike","No. Swap","units(Kw)","Km. Driven","GHG Avoided"]],body:n});var d=c.internal.getNumberOfPages(),i=0;for(i=0;i<d;i++){c.setPage(i);var l=c.internal.getCurrentPageInfo().pageNumber;c.setFontSize(12),c.text("page: "+l+"/"+d,10,c.internal.pageSize.height-10)}var f=Date(),v=d;for(i=1;i<=v;i++)c.setPage(i),c.setTextColor(150),c.setFontSize(7),c.text(50,c.internal.pageSize.height-10,"GECSS INVESTMENTS   -    CONFIDENTIAL      ".concat(f));c.save("GECSS_ebike_report.pdf"),Swal.fire({icon:"success",title:"Pdf downloaded successfully"}),e.create_record={}}else{e.$bvModal.hide("pdf-record");Swal.fire({icon:"error",title:"Oops.!!! No record found, please enter dates again."}),e.create_record={}}}));case 5:e.btn_loading_month=!1;case 6:case"end":return t.stop()}}),t)})))()},getPdfYear:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,e.btn_loading_year=!0,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_year",{headers:{Authorization:"Token ".concat(r)}}).then((function(t){if(t.length>=1){e.$bvModal.hide("pdf-record"),e.pdfData=t;var r=e.pdfData,n=[];r.forEach((function(element,e,t){n.push([e+1,element.bike_no,element.swap,element.units,element.mileage,element.amount])}));var c=new o.default;c.autoTable({head:[["No","E-Bike","No. Swap","units(Kw)","KM. Driven","Amount(KES)"]],body:n});var d=c.internal.getNumberOfPages(),i=0;for(i=0;i<d;i++){c.setPage(i);var l=c.internal.getCurrentPageInfo().pageNumber;c.setFontSize(12),c.text("page: "+l+"/"+d,10,c.internal.pageSize.height-10)}var f=Date(),v=d;for(i=1;i<=v;i++)c.setPage(i),c.setTextColor(150),c.setFontSize(7),c.text(50,c.internal.pageSize.height-10,"GECSS INVESTMENTS   -    CONFIDENTIAL      ".concat(f));c.save("GECSS_ebike_report.pdf"),Swal.fire({icon:"success",title:"Pdf downloaded successfully"}),e.create_record={}}else{e.$bvModal.hide("pdf-record");Swal.fire({icon:"error",title:"Oops.!!! No record found, please enter dates again."}),e.create_record={}}}));case 5:e.btn_loading_year=!1;case 6:case"end":return t.stop()}}),t)})))()}},props:{}}),d=(r(608),r(12)),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"pdf-filter-btn"},[t("div",[e.btn_loading_today?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getPdfToday()}}},[e._v("Today")])],1),e._v(" "),t("div",[e.btn_loading_week?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getPdfWeek()}}},[e._v("This week")])],1),e._v(" "),t("div",[e.btn_loading_month?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getPdfMonth()}}},[e._v("This month")])],1),e._v(" "),t("div",[e.btn_loading_year?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getPdfYear()}}},[e._v("This year")])],1)]),e._v(" "),t("hr"),e._v(" "),t("b-form",{on:{submit:function(t){return t.preventDefault(),e.pdfGenerate.apply(null,arguments)}}},[t("div",{attrs:{"uk-grid":""}},[t("div",{staticClass:"uk-width-expand@m"},[t("label",{staticStyle:{color:"#1a1a1a"}},[e._v("Start Date.")]),e._v(" "),t("b-form-input",{attrs:{type:"date",required:""},model:{value:e.create_record.fromdate,callback:function(t){e.$set(e.create_record,"fromdate",t)},expression:"create_record.fromdate"}})],1)]),e._v(" "),t("br"),e._v(" "),t("div",{attrs:{"uk-grid":""}},[t("div",{staticClass:"uk-width-expand@m"},[t("label",{staticStyle:{color:"#1a1a1a"}},[e._v("End date.")]),e._v(" "),t("b-form-input",{attrs:{type:"date",required:""},model:{value:e.create_record.todate,callback:function(t){e.$set(e.create_record,"todate",t)},expression:"create_record.todate"}})],1)]),e._v(" "),t("br"),e._v(" "),t("SbButton",{attrs:{title:"Download PDF"}}),e._v(" "),t("br")],1)],1)}),[],!1,null,"44f8d1f4",null);t.default=component.exports},816:function(e,t,r){"use strict";r(644)},817:function(e,t,r){var n=r(37)(!1);n.push([e.i,"\n.status-btn[data-v-4db528af]{\n\tborder-radius: 0px !important;\n\tpadding: 0px 2px 0px 2px !important;\n\tfont-size: 12px !important;\n\twidth: 80px !important;\n}\n.pdf-filter-btn[data-v-4db528af]{\n    display: flex;\n    justify-content: space-around;\n}\n",""]),e.exports=n},862:function(e,t,r){"use strict";r.r(t);r(16),r(3),r(2),r(11),r(156);var n=r(30),o=(r(45),r(64),r(203)),table=r(701),c=r(702),d=r(703),l=r(570),f=r.n(l),v={layout:"default_common",components:{RecordTable:table.default,Button:o.default,Statistics:c.default,PdfRecord:d.default},data:function(){return{records:[],recordbyId:{},status:"9",record_spinner:!1,search:{queary:"",pageSearch:null,pageError:!1},pagination:{rows:null,perPage:null,rowperPage:null,currentPage:null,countOnPage:null,totalPages:null,fromCount:null,toCount:null},paginationLinks:{self:"",last:"",first:"",prev:""},global_pagination:{},perms:{perms_add:"",perms_view:"",perms_update:"",perms_delete:"",perms_restore:"",perms_status:""},filter_today:!1,filter_week:!1,filter_month:!1,filter_year:!1,mpesa_filter:{fromdate:"",todate:""}}},filters:{diffForHumans:function(e){return e?f()(e).format("MMM, ddd D. YYYY h:mm A"):null}},mounted:function(){this.getRecordOnMount(),this.getPerms()},methods:{setLoadingTrue:function(){this.$refs.blockLoadingRefresh.stateLoading()},setLoadingFalse:function(){this.$refs.blockLoadingRefresh.stateNormal()},getPerms:function(){this.perms.perms_add="1",this.perms.perms_view="1",this.perms.perms_update="1",this.perms.perms_delete="1",this.perms.perms_restore="1",this.perms.perms_status="1"},getRecordOnMount:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoadingTrue(),r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,t.next=5,e.$axios.$get("v1/reports/mileage_reports").then((function(t){e.records=t}));case 5:e.setLoadingFalse();case 6:case"end":return t.stop()}}),t)})))()},getRecords:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoadingTrue(),r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,t.next=5,e.$axios.$get("v1/reports/mileage_reports").then((function(t){e.records=t}));case 5:e.setLoadingFalse();case 6:case"end":return t.stop()}}),t)})))()},getRecordById:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$bvModal.show("dmk-update-record"),t.record_spinner=!0,n=localStorage.getItem("token"),t.$axios.defaults.headers.common.Authorization="Token "+n,r.next=6,t.$axios.$get("v1/mpesa/".concat(e)).then((function(e){t.recordbyId=e}));case 6:t.record_spinner=!1;case 7:case"end":return r.stop()}}),r)})))()},searchRecords:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoadingTrue(),""==e.search.queary&&e.getRecordOnMount(),r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,t.next=6,e.$axios.$get("v1/mpesa/search/".concat(e.search.queary)).then((function(t){e.records=t}));case 6:e.setLoadingFalse();case 7:case"end":return t.stop()}}),t)})))()},resetRecords:function(e){var t=this;this.$refs[e].stateLoading(),this.search={},this.getRecordOnMount(),setTimeout((function(){t.$refs[e].stateNormal()}),2e3)},getMpesaStatToday:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.filter_today=!0,r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_today").then((function(t){e.records=t}));case 5:e.filter_today=!1,e.$bvModal.hide("filter-record");case 7:case"end":return t.stop()}}),t)})))()},getMpesaStatWeek:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.filter_week=!0,r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_week").then((function(t){e.records=t}));case 5:e.filter_week=!1,e.$bvModal.hide("filter-record");case 7:case"end":return t.stop()}}),t)})))()},getMpesaStatMonth:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.filter_month=!0,r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_month").then((function(t){e.records=t}));case 5:e.filter_month=!1,e.$bvModal.hide("filter-record");case 7:case"end":return t.stop()}}),t)})))()},getMpesaStatYear:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.filter_year=!0,r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,t.next=5,e.$axios.$get("v1/reports/bike_reports_filter_year").then((function(t){e.records=t}));case 5:e.filter_year=!1,e.$bvModal.hide("filter-record");case 7:case"end":return t.stop()}}),t)})))()},getMpesaStatRange:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setLoadingTrue(),r=localStorage.getItem("token"),e.$axios.defaults.headers.common.Authorization="Token "+r,n={fromdate:e.mpesa_filter.fromdate,todate:e.mpesa_filter.todate},t.next=6,e.$axios.$post("v1/reports/bike_reports_filter_range",n).then((function(t){e.records=t}));case 6:e.setLoadingFalse(),e.$bvModal.hide("filter-record");case 8:case"end":return t.stop()}}),t)})))()},filterRecord:function(){this.$bvModal.show("filter-record")},getpdf_form:function(){this.$bvModal.show("pdf-record")}},head:function(){return{title:"Gecss | E-Bike report"}}},_=(r(816),r(12)),component=Object(_.a)(v,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"content"},[t("div",[t("Statistics")],1),e._v(" "),t("base-block",{ref:"blockLoadingRefresh",staticClass:"block-mode-loading-refresh",attrs:{rounded:"",title:"GECSS E-bike Report","header-bg":"","btn-option-fullscreen":""},scopedSlots:e._u([{key:"options",fn:function(){return[t("button",{staticClass:"btn-block-option",attrs:{type:"button","data-uk-tooltip":"Download"},on:{click:e.getpdf_form}},[t("i",{staticClass:"fa fa-cloud-download-alt"})]),e._v(" "),t("button",{staticClass:"btn-block-option",attrs:{type:"button","data-uk-tooltip":"Refresh"},on:{click:function(t){return e.resetRecords("blockLoadingRefresh")}}},[t("i",{staticClass:"si si-refresh"})]),e._v(" "),t("button",{staticClass:"btn-block-option",attrs:{type:"button","data-uk-tooltip":"Filter records"},on:{click:function(t){return t.preventDefault(),e.filterRecord()}}},[t("i",{staticClass:"fa fa-filter"})])]},proxy:!0}])},[e._v(" "),t("div",{staticClass:"dmk-search-td-con"},[t("RowsFilter",{attrs:{rowsPerPage:e.rowsPerPage}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.pagination.rowperPage,expression:"pagination.rowperPage"}],staticStyle:{"text-align":"center"},attrs:{id:"rowsperPage"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.pagination,"rowperPage",t.target.multiple?r:r[0])},function(t){return e.rowsPerPage()}]}},[t("option",{attrs:{value:"10"}},[e._v("10")]),e._v(" "),t("option",{attrs:{value:"25"}},[e._v("25")]),e._v(" "),t("option",{attrs:{value:"50"}},[e._v("50")]),e._v(" "),t("option",{attrs:{value:"100"}},[e._v("100")])])]),e._v(" "),t("div",{staticStyle:{display:"flex"}},[t("form",{attrs:{method:"get"},on:{submit:function(t){return t.preventDefault(),e.searchRecords()}}},[t("div",{staticClass:"dmk-search-con"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.search.queary,expression:"search.queary"}],staticClass:"form-control dmk-search-input",attrs:{type:"text",placeholder:"search "},domProps:{value:e.search.queary},on:{input:function(t){t.target.composing||e.$set(e.search,"queary",t.target.value)}}}),e._v(" "),t("button",{staticClass:"dmk-search-btn",attrs:{type:"submit"}},[t("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])])])])],1),e._v(" "),t("RecordTable",{attrs:{records:e.records}},e._l(e.records,(function(r,n){return t("tr",{key:r.id,attrs:{id:"dmk-td-items"}},[t("td",{staticClass:"td-1st-nth"},[e._v(" "+e._s(n+1)+" ")]),e._v(" "),t("td",[e._v(e._s(r.bike_no))]),e._v(" "),t("td",[r.swap>0?t("span",[e._v(" "+e._s(r.swap.toLocaleString())+" ")]):t("span",[e._v("0")])]),e._v(" "),t("td",[r.units>0?t("span",[e._v(" "+e._s(r.units.toLocaleString())+" ")]):t("span",[e._v("0")])]),e._v(" "),t("td",[r.mileage>0?t("span",[e._v(" "+e._s(r.mileage.toLocaleString())+" ")]):t("span",[e._v("0")])]),e._v(" "),t("td",[r.ghg>0?t("span",[e._v(" "+e._s(r.ghg.toLocaleString())+" ")]):t("span",[e._v("0")])]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn status-btn btn-success",attrs:{"aria-expanded":"false"}},[e._v("\n\t\t\t\t\tActive\n\t\t\t\t")])])])})),0),e._v(" "),t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",{})])],1),e._v(" "),t("OuModal",{attrs:{mdId:"pdf-record",size:"md",title:"Gecss E-bike Reports"}},[t("PdfRecord",{attrs:{getRecords:e.getRecords}})],1),e._v(" "),t("OuModal",{attrs:{mdId:"filter-record",size:"md",title:"Filter E-bike report"}},[t("div",[t("div",{staticClass:"pdf-filter-btn"},[t("div",[e.filter_today?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getMpesaStatToday()}}},[e._v("Today")])],1),e._v(" "),t("div",[e.filter_week?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getMpesaStatWeek()}}},[e._v("This Week")])],1),e._v(" "),t("div",[e.filter_month?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getMpesaStatMonth()}}},[e._v("This month")])],1),e._v(" "),t("div",[e.filter_month?t("b-button",{attrs:{variant:"outline-primary",disabled:"",squared:""}},[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v(" Loading... ")],1):t("b-button",{attrs:{variant:"outline-primary",squared:""},on:{click:function(t){return e.getMpesaStatYear()}}},[e._v("This year")])],1)]),e._v(" "),t("hr"),e._v(" "),t("b-form",{on:{submit:function(t){return t.preventDefault(),e.getMpesaStatRange.apply(null,arguments)}}},[t("div",{attrs:{"uk-grid":""}},[t("div",{staticClass:"uk-width-expand@m"},[t("label",{staticStyle:{color:"#1a1a1a"}},[e._v("Start Date.")]),e._v(" "),t("b-form-input",{attrs:{type:"date",required:""},model:{value:e.mpesa_filter.fromdate,callback:function(t){e.$set(e.mpesa_filter,"fromdate",t)},expression:"mpesa_filter.fromdate"}})],1)]),e._v(" "),t("br"),e._v(" "),t("div",{attrs:{"uk-grid":""}},[t("div",{staticClass:"uk-width-expand@m"},[t("label",{staticStyle:{color:"#1a1a1a"}},[e._v("End date.")]),e._v(" "),t("b-form-input",{attrs:{type:"date",required:""},model:{value:e.mpesa_filter.todate,callback:function(t){e.$set(e.mpesa_filter,"todate",t)},expression:"mpesa_filter.todate"}})],1)]),e._v(" "),t("br"),e._v(" "),t("SbButton",{attrs:{title:"Pull records"}}),e._v(" "),t("br")],1)],1)])],1)])}),[],!1,null,"4db528af",null);t.default=component.exports;installComponents(component,{BaseBlock:r(302).default})}}]);